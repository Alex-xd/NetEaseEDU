!function(){var e=function(){var t=[].slice.call(arguments);return t.push(e.options),1==arguments.length?e.compile.apply(e,t):arguments.length>=2?e.to_html.apply(e,t):void 0},t={escapehash:{"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},escapereplace:function(e){return t.escapehash[e]},escaping:function(e){return"string"!=typeof e?e:e.replace(/[&<>"]/gim,this.escapereplace)},detection:function(e){return"undefined"==typeof e?"":e}},n=function(e){if(console){if(console.warn)return void console.warn(e);if(console.log)return void console.log(e)}throw e},r=function(e,t){if(e=e!==Object(e)?{}:e,e.__proto__)return e.__proto__=t,e;var n=function(){},r=new(n.prototype=t,n);for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);return r};e.__cache={},e.version="0.4.0-dev",e.settings={forstart:/{@each\s*([\w\.]*?)\s*as\s*(\w*?)\s*(,\s*\w*?)?}/gim,forend:/{@\/each}/gim,ifstart:/{@if\s*([^}]*?)}/gim,ifend:/{@\/if}/gim,elsestart:/{@else}/gim,elseifstart:/{@else if\s*([^}]*?)}/gim,interpolate:/\${([\s\S]+?)}/gim,noneencode:/\$\${([\s\S]+?)}/gim,inlinecomment:/{#[^}]*?}/gim,rangestart:/{@each\s*(\w*?)\s*in\s*range\((\d+?),(\d+?)\)}/gim},e.options={cache:!0,strip:!0,errorhandling:!0,detection:!0,_method:r({__escapehtml:t,__throw:n},this)},e.set=function(e,t){if(2===arguments.length)return void(this.options[e]=t);if(e===Object(e))for(var n in e)e.hasOwnProperty(n)&&(this.options[n]=e[n])},e.register=function(e,t){var n=this.options._method;return n.hasOwnProperty(e)?!1:n[e]=t},e.unregister=function(e){var t=this.options._method;return t.hasOwnProperty(e)?delete t[e]:void 0},e.template=function(t){var n=this;this.options=t,this.__interpolate=function(e,t,n){var r=e.split("|"),i="";return r.length>1&&(e=r.shift(),i="_method."+r.shift()),"<%= "+(t?"_method.__escapehtml.escaping":"")+"("+(n&&n.detection===!1?"":"_method.__escapehtml.detection")+"("+i+"("+e+"))) %>"},this.__removeShell=function(t,r){var i=0;return t=t.replace(e.settings.forstart,function(e,t,n,r){var n=n||"value",r=r&&r.substr(1),o="i"+i++;return"<% for(var "+o+"=0, l"+o+"="+t+".length;"+o+"<l"+o+";"+o+"++) {var "+n+"="+t+"["+o+"];"+(r?"var "+r+"="+o+";":"")+" %>"}).replace(e.settings.forend,"<% } %>").replace(e.settings.ifstart,function(e,t){return"<% if("+t+") { %>"}).replace(e.settings.ifend,"<% } %>").replace(e.settings.elsestart,function(e){return"<% } else { %>"}).replace(e.settings.elseifstart,function(e,t){return"<% } else if("+t+") { %>"}).replace(e.settings.noneencode,function(e,t){return n.__interpolate(t,!1,r)}).replace(e.settings.interpolate,function(e,t){return n.__interpolate(t,!0,r)}).replace(e.settings.inlinecomment,"").replace(e.settings.rangestart,function(e,t,n,r){var o="j"+i++;return"<% for(var "+o+"=0;"+o+"<"+(r-n)+";"+o+"++) {var "+t+"="+o+"; %>"}),r&&r.errorhandling===!1||(t="<% try { %>"+t,t+='<% } catch(e) {_method.__throw("Juicer Render Exception: "+e.message);} %>'),t},this.__toNative=function(e,t){return this.__convert(e,!t||t.strip)},this.__lexicalAnalyze=function(t){var n=[],r="",i=function(e,t){if(Array.prototype.indexOf&&e.indexOf===Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},o=function(e,t){t=t.match(/\w+/gim)[0],-1===i(n,t)&&n.push(t)};t.replace(e.settings.forstart,o).replace(e.settings.interpolate,o).replace(e.settings.ifstart,o);for(var s=0;s<n.length;s++)r+="var "+n[s]+"=_."+n[s]+";";return"<% "+r+" %>"},this.__convert=function(e,t){var n=[].join("");return n+="'use strict';",n+="var _=_||{};",n+="var _out='';_out+='",n+=t!==!1?e.replace(/\\/g,"\\\\").replace(/[\r\t\n]/g," ").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out;":e.replace(/\\/g,"\\\\").replace(/[\r]/g,"\\r").replace(/[\t]/g,"\\t").replace(/[\n]/g,"\\n").replace(/'(?=[^%]*%>)/g,"	").split("'").join("\\'").split("	").join("'").replace(/<%=(.+?)%>/g,"';_out+=$1;_out+='").split("<%").join("';").split("%>").join("_out+='")+"';return _out.replace(/[\\r\\n]\\s+[\\r\\n]/g, '\\r\\n');"},this.parse=function(e,t){var i=this;return t&&t.loose===!1||(e=this.__lexicalAnalyze(e)+e),e=this.__removeShell(e,t),e=this.__toNative(e,t),this._render=new Function("_, _method",e),this.render=function(e,t){return t&&t===n.options._method||(t=r(t,n.options._method)),i._render.call(this,e,t)},this}},e.compile=function(e,t){t&&t===this.options||(t=r(t,this.options));try{var i=this.__cache[e]?this.__cache[e]:new this.template(this.options).parse(e,t);return t&&t.cache===!1||(this.__cache[e]=i),i}catch(o){return n("Juicer Compile Exception: "+o.message),{render:function(){}}}},e.to_html=function(e,t,n){return n&&n===this.options||(n=r(n,this.options)),this.compile(e,n).render(t,n._method)},"undefined"!=typeof module&&module.exports?module.exports=e:this.juicer=e}();